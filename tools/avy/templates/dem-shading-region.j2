---
layout: page
title: {{ page }} Avalanche Map Layers
description: Autogenerated DEM Shading rules for each advisory zone for quickly adding avalanche danger, problems, and sun angle layers in CalTopo.
js_includes:
  - https://unpkg.com/leaflet/dist/leaflet.js
  - dem.js
css_includes:
 - https://unpkg.com/leaflet/dist/leaflet.css
---

<!-- Looking out for you. -->

<section class="measure center lh-copy f5-ns f6 ph2 mv4" style="text-align: justify;">
<strong>"What's the danger?"</strong> Here are autogenerated DEM Shading rules for each advisory zone that allow for quickly adding avalanche danger, problems, and sun angle layers to CalTopo maps.
Reports sourced from <a class="no-underline fancy-link relative light-red" target="_blank" href="https://avalanche.org/">avalanche.org</a>.
</section>

<p id="settings-toggle" class="mw5 b center tc hover-light-red black-70 pointer">Show Instructions</p>
<section id="settings" class="overflow-hidden" style="display:none;">
    <div class="mv2 ph2 center">
        <div class="fn f6 tc">
            <p class="measure lh-copy center"><a class="no-underline fancy-link relative light-red" href="https://training.caltopo.com/all_users/base-layers/custom2#dem">Digital Elevation Model (DEM)</a> shading let's you    create custom shading schemes based on elevation, slope, aspect and tree cover.</p>
            <hr class="mw5 p0 mv2 o-60 b0 bt b--light-red light-red bg-light-red">
            <p class="measure lh-copy center"><strong>Avalanche Report</strong></p>
            <p class="measure lh-copy center">
                Danger report updates are fetched at 7:33pm and 7:33am. The selected elevation bands are not meant to be exact, but represent a characteristic of the terrain which varies locally.
            </p>
            <p class="measure lh-copy center">
                The <strong>highest</strong> band typically includes alpine areas beginning as the treeline transitions into open slopes extending to ridges and peaks.
            </p>
            <p class="measure lh-copy center">
                The <strong>middle</strong> band is typically a narrow transition zone between dense forests and treeless alpine areas.
            </p>
            <p class="measure lh-copy center">
                The <strong>lowest</strong> band typically extends from valley floors or snowline to near treeline.
            </p>
            <hr class="mw5 p0 mv2 o-60 b0 bt b--light-red light-red bg-light-red">
            <p class="measure lh-copy center"><b>Usage</b></p>
            <p class="measure lh-copy center">
                You'll find that <b>Terrain Modeling</b> in the left pane will show layers that can be turned on and edited. The right pane will show <b>Custom Layers</b> that can be toggled on or off.
            </p>
        </div>
    </div>
</section>

<div>
    <div class="mt4 ph2 tc">
        <strong class="f6">Select A Zone:</strong>
        <select class="f6 ma1 bg-near-white pa2" id="zoneSel">
            {% for zone in zones %}
            <option value="{{ zone.slug }}" {% if loop.first %}selected=""{% endif %}>{{ zone.name }}</option>
            {% endfor %}
        </select>
    </div>
</div>

<div class="flex flex-column flex-row-ns">
    <div class="ph3 w-100 w-50-ns">
        {% for zone in zones %}
        <div id="{{ zone.slug }}-report" class="avy-zone{% if not loop.first %} dn{% endif %}" data-published="{{ zone.published }}">
            <h3 class="tc bb b--moon-gray">Avalanche Report <a target="_blank" href="{{ zone.url }}"><img style="width: 15px;" src="/assets/images/svg/info-icon.svg"></a></h3>
            {% if zone.danger %}
            <div id="{{ zone.slug }}-title" class="mv4 tc">
                <div><a class="no-underline black-70 pa2 hover-light-red b--moon-gray bg-light-gray ba" target="_blank" href="https://caltopo.com/map.html#ll={{ zone.geo[1] }},{{ zone.geo[0] }}&z=10&b=mbt&{{ zone.layers }}">Pre-populated CalTopo Map</a></div>
            </div>
            <dl class="f6">
                <dt>
                    <strong>{{ sun_day }} Avalanche Danger</strong>
                    <div class="tooltip dib v-top pl2"><a data-clipboard-text="{{ zone.danger | map(attribute='layer') | reverse | join('&#10;') }}" onclick="clickFunc(this, 'danger-tooltip-{{ zone.zone_id }}'); return false;" onmouseout="outFunc('danger-tooltip-{{ zone.zone_id }}')" href="#"><span class="tooltiptext" id="danger-tooltip-{{ zone.zone_id }}">Copy to clipboard</span><img style="width: 15px;" src="/assets/images/svg/copy-icon.svg"></a></div>
                </dt>
                <dd class="ml3">
                    <ul class="list pl0 mt1 mb0 code f7">
                    {% for rule in zone.danger|reverse %}
                        <li class="pv1"><div style="clear: both;background-color: {{ rule.color }}" class="fl mr2 h1 w1"></div> {{ rule.desc }}</li>
                    {% endfor %}
                    </ul>
                </dd>
            </dl>
            {% else %}
            <div class="pv4 ph2 tc ba b--moon-gray">{{ zone.message }}</div>
            {% endif %}

            {% if zone.problems %}
            <dl class="f6">
                {% for problem in zone.problems %}
                    <dt class="mt3">
                        <strong>{{ problem.name }}</strong>
                        <div class="tooltip dib v-top pl2"><a data-clipboard-text="{{ problem.rules | map(attribute='layer') | reverse | join('&#10;') }}" onclick="clickFunc(this, 'problem-{{ loop.index }}-tooltip-{{ zone.zone_id }}'); return false;" onmouseout="outFunc('problem-{{ loop.index }}-tooltip-{{ zone.zone_id }}')" href="#"><span class="tooltiptext" id="problem-{{ loop.index }}-tooltip-{{ zone.zone_id }}">Copy to clipboard</span><img style="width: 15px;" src="/assets/images/svg/copy-icon.svg"></a></div>
                    </dt>
                    <dd class="ml3">
                        <ul class="list pl0 mt1 mb0 code f7">
                        {% for rule in problem.rules|reverse %}
                            <li class="pv1"><div style="clear: both;background-color: {{ rule.color }}" class="fl mr2 h1 w1"></div> {{ rule.desc }}</li>
                        {% endfor %}
                        </ul>
                    </dd>
                {% endfor %}
            </dl>
            {% endif %}
            {% if zone.published %}
            <p class="tc f6">
                <strong>Issued at:</strong> {{ zone.published }}<br />
                <strong>Issued by:</strong> <a class="no-underline fancy-link relative light-red" href="{{ zone.url }}">{{ zone.center_id }}</a>
            </p>
            {% endif %}
        </div>
        {% endfor %}
    </div>
    <div class="ph3 w-100 w-50-ns">
        <h3 class="tc bb b--moon-gray">Zone Shape</h3>
        <div style="height: 300px;" id="map"></div>
        {% for zone in zones %}
        <div id="{{ zone.slug }}-shape" data-geojson="/assets/json/avalanche-zones/{{ zone.slug }}.geojson" class="avy-zone{% if not loop.first %} dn{% endif %}">
            <div class="mt1 tc"><a class="no-underline fancy-link relative light-red f6" target="_blank" href="/assets/json/avalanche-zones/{{ zone.slug }}.geojson" download="">Download GeoJSON</a></div>
        </div>
        {% endfor %}
    </div>
</div>

<hr id="hr-0" class="mw5 p0 mv4 o-70 b0 bt b--light-red light-red bg-light-red">
<section class="tc lh-copy">
    <strong class="f6">Change Regions:</strong>
    <select class="f6 ma1 bg-near-white pa2" id="regionSel">
        {% for state in states %}
        {% if state.active %}
        <option value="{{ state.page }}.html"{% if state.name == page %} selected=""{% endif %}>{{ state.name }}</option>
        {% endif %}
        {% endfor %}
        <option value="/avy/canada.html">Canada</option>
    </select>
</section>

{% raw %}
{% include feedback.html %}
{% endraw %}

<p id="issues-toggle" class="mw5 b center tc hover-light-red black-70 pointer">Show Known Issues</p>
<section id="issues" class="overflow-hidden tc f6">
</section>
